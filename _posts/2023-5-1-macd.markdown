---
layout: post
title:  "MACD"
date:   2023-5-1 20:35:35 +0800
categories: command
---

作者：干货逻辑


此文会带大家由浅入深全面理解macd跟均线指标的意义跟底层逻辑，并在后面指出现在普遍炒股软件自带的macd指标的致命漏洞。

先回答大家最关心的问题，macd指标有预测涨跌的功能吗？答案是有的，但必须配合其他工具共同判断，单单看macd是没意义的，至于为什么，后面会讲解。

macd与均线系统存在意义与底层逻辑，是基于概率学上的决策者在时间轴与价格轴的平滑正态分布。

什么意思呢？

简单来讲，就是参与市场的人们，在同一时间收到同样的信息并做出同样的决策，是非常小概率的，一般大概率的情况是总会存在一些人先收到消息并做出决策，总会有人后知后觉。

就拿股票市场来说，假设有一个股一直处于下行趋势，现在有个重大利好，从上帝视角看这个重大利好最终会导致这个股票扭转为多头趋势并使股价回升到某个较高价位。而这个重大利好，必然会有人较早知道，有人较迟知道，而要市场所有人在同一时间知道这利好并又在同一时间做出买入决策，是概率极低，几乎不可能的。大概率情况是有人提前做出买入，随着时间的推移，收到这利好消息的人数会越来越多，越来越多的人做出买入决策，而做出买入决策的人数在时间轴上必然有个峰值，过了那峰值后，随着时间的推移做出买入决策的人会开始越来越少——这是因为一个利好因素的作用时间范围是有限的，例如根据这利好做判断的人，肯定不会等到这利好公布完一年后才想起要买入。所以，根据这利好做出买入决策的人在时间轴的分布不可能无限增加，它必然有个峰值，过了峰值后就开始下降。

于是就可以得出下面一个正态分布图：

![images](/source/macd1.png)

那这样会对盘面产生什么效果呢？

那就是股价由熊转牛的过程，大概率会经历一个先是下行趋势逐渐放缓，然后形成一个底部，在底部横盘一段时间（有长有短），然后股价开始缓慢上翘，（是的，这一过程就是macd底背离），然后会经历一个加速上行的阶段，上行到一定阶段后又开始放缓。

这就是一个股价由熊转牛的过程，相信大家也都发现，股价由熊转牛一般都会经历一个下跌放缓，然后横盘震荡一段时间筑底，最后开始慢慢上扬，原因就是上面我解释的，决策者在时间轴上的正态分布。

如果要求股价跌到某个价位，不经历减速过程，突然一个深V锐角式的头也不回的快速上涨，等于是要求市场上所有的决策者原本是统一看跌的确又突然在某个时间点上突然达成一个看涨并买入的统一共识，想想都知道这是不符合概率学的。

以上是决策者在时间轴的正态分布原理，下面就讲解在价格轴上的决策者正态分布。

相信大家一定听过顺势而为，或者强者恒强这样的说法。为什么？为什么涨得越厉害的，往往会更加涨，前一天涨停板的股票往往会高开。

其实这也是缘于上面所说的决策者在价格轴上的正态分布。什么意思呢？我就拿涨停板这种极端的例子来说明，涨停板是什么？就是股价到了今日的最高限价点，依然买盘远远大于卖盘，通俗点讲就是这个价位上几乎没有人肯卖，但想买的人却大把，于是价格封死在那里。往往涨第二天会高开，为什么？很简单的道理，如果这个价格点99%的人都认为继续涨而做买，那下一个价格点突然间看跌而做卖出的人（资金量）大于做买的人（资金量）的概率有多大？

例如现在股价是10元，并且封涨停了，也就意味着市场上99%的资金盘在这个价格点继续做买，做卖的人却很少，而如果要下一个价格点跌，那么就要那个价格点的人看跌并做卖的人大于做买的人，也就是说看空的资金盘必须大于50%（通俗点讲就是至少一半以上的资金盘看跌）。原本10元的时候买盘比例占99%，也就是看涨的人占了99%，看跌的人只占1%，然后10.1元的时候突然整个市场看涨的人骤然降低到50%以下，看跌的人去到50%以上，这概率有多大？

很显然这概率极低，大概率的情况是这样：10元的时候看多盘99%，然后10.1元的时候继续看多盘降到90%左右，10.5元时候80%左右......12元的时候，市场上只剩下50%看多，50%看跌，这时候就开始停止涨，我们可以把这个价格点称之为转势临界点。（以上数字我只是随意编的，方便大家理解，但请注意，我说的是看多盘而不是做多盘，因为每一个成交价买盘跟卖盘是恒等的，但想做多跟想做空的资金盘却不是相等的，如果想做多的盘大于想做空的盘，那么这个价格点买盘消化完对应的卖盘后，多出的买盘只能去到更高价格点寻求成交）

以上这种才是符合概率学的，简单来讲就是当一个价格点市场上统一看涨，往往接下来的价格点都会继续看涨，虽然看涨的资金量会随着股价越高而有所减少，但它一般符合平滑逐渐递减的状态。

（所以这就是为什么强者恒强，因为均线斜率越高，说明这个价格点上市场上看涨的资金量占的比例越高，占的比例越高，说明离上方转势临界点越远，于是上涨空间越大——这就是右侧交易的底层逻辑，右侧交易又可以称之为追涨杀跌，我遇到的最极致的追涨杀跌就是专追涨停板，虽然我不建议，但不可否认其具有一定的可行性）

为了更好的利用上述的决策者在时间轴与价格轴的正态分布原理，人们发明了均线系统。

为什么要均线？想象一下均线没被运用以前，人们只能看K线与分时走势，你会发现上述的原理并不适用，因为分时走势下，价格都是上蹿下跳毫无规律可言。

为什么分时走势下价格上蹿下跳毫无规律可言？我在别的文章解释过了，我们只要反过来想，在一个成交活跃的市场下，价格始终保持一条水平的直线有多难？那就意味着任何时候，买盘跟卖盘资金量恰好是相等的，这显然是不符合概率学。

所以价格之所以在分时走势下总是出于上窜小跳——因为任何一个价格点，买盘跟卖盘资金量都无法在时间轴上一直保持恰好相等的状态，更多情况是有时买盘多一些，有时卖盘多一些，只要有这么一点或多或少的差异，那么溢出的资金盘只能在下一个价格点寻求成交，而我们看到的分时走势都是每分钟的平均成交价连成的线，于是就呈现出上蹿下跳的状态。

那么是不是就说明上述的决策者在时间轴与价格轴的正态分布原理就不适用呢？

在这里我要继续深化下决策者在时间轴与价格轴的正态分布图。事实上，跟上述提到的“市场上所有的决策者都在同一时间做同样的操作是极低概率”一样，决策资金盘在时间轴上等密度均匀分布也是近乎不可能的，跟前者概率是一样低的。什么意思呢？就是决策者B在决策者A做完操作后紧接着做同样的操作，同样决策者C又紧挨着决策者B做同样的操作，这种在时间点上完美承接是几乎不可能的，一般不同的资金盘做决策的时间点之间必然存在间隙，再加上不同资金盘的资金量是不一样的（或者说每个决策者所操作的资金量是不一样的），但它们都是受同样的利好或利空因素作为决策依据（或者是同个时间段几个不同的利好或利空事件）。所以“决策者在时间轴与价格轴的正态分布”原理依然成立，只不过更具体的时间轴分布图应该是这样：

![images](/source/macd2.png)

正因为做多资金盘在时间轴上必然存在间隙，所以股价在上涨过程中必然存在来回震荡，（这个震荡不单是指分时走势上的上蹿下跳，同时也是指小周期均线的波动，理解这点很重要，是为后面理解股价在上涨或下跌趋势中必然存在价格回撤做准备的，后面我还会在这点继续展开探讨。）

为了解决分时走势上的这种问题，于是发明了均线。

其实即使还没发明均线以前，分时走势下选一条连续平滑的曲线，除去两个不可导的点，这连续平滑曲线上任何一点的斜率，都可以视为看多资金盘与看空资金盘的资金量比值，上涨曲线的点斜率越大，那么说明这个价格点看多资金盘比看空资金盘的比值越大，比值越大则说明看多资金盘相较于看空资金盘越多（这时候有人又要困惑，不是说好成交里面做多盘跟做空盘资金量是恒等的吗？是的，前面已经解释过一遍了，如果想做多的盘大于想做空的盘，那么这个价格点买盘消化完对应的卖盘后，多出的买盘只能去到更高价格点寻求成交，于是股价就是这么涨上去的）——以上是经过一套严谨的数学证明过程得出的结论，证明过程我就不在这里展开了，其实你脑洞够大也很容易想通的。

然并卵，因为分时走势都是上蹿下跳，存在太多不可导的点了。所以才需要均线的诞生，其实均线就是数学所说的线性回归，其意义就是让一系列杂乱无章不可导的曲线转换成一条平滑连续可导的曲线。

有了均线，我们就能规避掉因为上述解释的各个决策资金盘在时间轴上的间隙所造成的价格波动，让趋势更好呈现出来。

而均线的使用意义就是让我们看到现在股价是处于加速上行（或下跌）阶段还是转势阶段，但如果仅仅是一条均线，会发现没那么直观，所以人们发明了一个K线大图里面存在三或四条均线——分别是大周期均线，中周期均线，小周期均线，一般炒股软件系统默认四条，120日均线、60日均线、30日均线、15日均线，（但其实多少日这种参数的设定真的是次要的，我在后面会解释）。设多条均线的意义是什么？因为大周期均线转势以前，小周期均线必然先穿过它，例如大周期均线由空转多时，必然先有小周期均线从下往上穿过大周期均线（这就是所谓的金叉），并且在此之后小周期均线一直处于大周期均线上方，则可以很直观的看到大周期均线转势了。另外，亦可以通过观察小周期均线与大周期均线之间的间隙是否拉大来判断趋势是处于加速还是减速（如果处于减速，同样可以通过MACD背离或背驰来判断，两个现象必然同时出现）。

而MACD，则是建立在均线系统上的产物，它等于是把其中一条最大周期的均线拉直成水平线，另外两条均线跟它的间隙保持不变形成的图，也是为了观察趋势是否处于减速状态。

macd与均线系统的运用，还有建立在此基础上的缠论，其实都是围绕着趋势翻转前大概率经过原有趋势的减速状态这一定律的运用展开的。

以上就是macd与均线系统的底层逻辑的大概讲解，但其实聪明的人会发现，就这样的解析，还是有一些无法自圆其说的地方，例如我们可以看到，一个连续的趋势里面，必然会有几次价格回撤，例如上涨趋势里面，总会经历几次小周期均线回调后又继续上涨，那么问题来了，我们该如何辨别这是趋势的翻转，还是仅仅是上涨过程的一次小回撤？——这才是此篇的重点，我们才辨别之前，首先要先理解为什么会又价格回撤，这期间到底发生了什么？接下来才是烧脑的部分。


在继续探讨下去前，我打算还是先解决一个问题，为什么现在你炒股软件上的macd其实一点用都没有？它不单止没用，还会给你相反的信号，往错误的方向指，或者说它所描绘的形态呈现出来是完全错的，为什么？

很简单，是因为自带的macd是以股价涨跌的绝对值来作为变量，正确的应该是用股价涨跌的比值来作为变量。

怎么理解上面这句话呢？

举个例子，假如一个股在单位周期内从20块跌到10块，在下个单位周期从10块跌到4块，也就是说前个周期总共跌了10块，后一个周期只跌了6块，那么这个过程，是加速下跌还是下跌放缓？

答案是在加速下跌，为什么？因为前面一个周期跌幅是50%，后一个周期跌幅是60%，所以它是处于加速下滑阶段。

然而如果看你现在系统自带的均线与macd，它给你呈现的确实底背离或底背驰，因为它是以价格绝对值作为变量——所以它给你描述的，是完全相反的信号。

好了，接下来一个问题，为什么要用波幅比值来作为变量才是正确呢？

为解答这个问题，我就拿工商银行跟贵州茅台来说明：

为什么工商银行波动几毛钱那么难，而贵州茅台一天波动个几十块是常有的事？

这个问题问准确点，应该这么问：为什么股价越高，股价绝对值的波动幅度越大？然而如果是看振幅比值，所有股机会都是一样的——通俗点讲就是工商银行与贵州茅台涨停（10%）的机会是一样的，然而工商银行只需一天涨5毛就涨停了，而贵州茅台要一天涨170块才能涨停——也就是说，贵州茅台一天涨170块，跟工商银行涨5毛的机会或难度是一样的。

其实这现象大家都知道，并且大家都习以为常，觉得是理所当然的自然现象，至于为什么会这样，却没多少人能够解释的清楚，包括市面上的一些专家与知网的院校教授，他们很多都解释的很含糊。然而理解这现象背后的逻辑非常重要。

有专家会从基本面角度去解释：工商银行涨1块，相当于整体市值涨了20%，而贵州茅台涨1块，其市值只是涨了千分之一不到，肯定工商银行涨1块难啦。——这种解释在我看来就是正确的废话，就相当于我解释汽车制动原理的时候说踩了油门所以汽车会动，这些都是人尽皆知的道理，但我们追求的是具体到点的逻辑关系，基本面影响到盘面的具体作用过程是什么？而且这种解释，只能解释它的涨幅与跌幅，却解释不了波动，例如工商银行与贵州茅台同样的震荡整理，工商银行的震荡区间一般只有几毛钱，而贵州茅台的震荡区间却是几十块钱。

有专家解释说这个跟盘子大小有关，虽然有些股的股价高，但流通股数量少，总流通市值就小，那么盘子就小，盘子越小，那么产生波动就越容易。然而工商银行的流通市值是13000亿元，贵州茅台的流通市值是22000亿元，贵州茅台市值将近是工商银行的两倍。

其实这跟盘子大小无关。

如果理解了成交量与价格波动的逻辑关系，那么你自己都可以尝试去解释这一现象了。又或者说，工商银行与贵州茅台这种差异现象的存在，从另一个角度佐证了我系列文章里面论证的成交量与价格波动的逻辑关系，为什么呢？后面会详细解释。

现在我先解释这种现象的背后逻辑。

想象一下，假设现在市场上只有两个股票给你选择，一个是工商银行（现价每股5块），一个是贵州茅台（现价每股1786块）。

而你现在手头上有一笔钱，例如现在手头上有100万，你期望你的投资收益率有10%，也就是希望自己能赚10万左右。那么我们分别来看下工商银行与贵州茅台，要怎样的情况才能实现你的期望。

如果你把100万全部买入贵州茅台，大概能买560股（为了方便论证，我就不按手数去算了），那么若要在这股上赚10万，则需要它涨178.6块钱。

那我们现在来看如果你把全部100万买入工商银行，想要在这股上赚10万，则需涨多少呢？工商银行现在股价是5元，100万就能够买20万股，而它只需要涨5毛，就能让你赚10万。

同样10万元的目标收益，工商银行只需涨5毛，而贵州茅台则需要涨178.6块。

以上大家很好理解，你会说这不理所当然嘛，然而这又如何影响到实际波动呢？

现在我们尝试反推一下，如果我们作为观察者的角度去看，如果看到一个人在这两个股之间选择，他选择把钱投入了贵州茅台，而没去买工商银行，或者说他把钱投入到贵州茅台的量要比工商银行要多，则说明了什么？

说明了那个人经过各种考量，基本面分析也好、财务状况分析也好、技术面分析也好，总之他根据他的方法预判，他认为自己把钱投入到贵州茅台所预期的收益要比投入到工商银行要多。

又或者更具体的说，如果他经过各种分析手段，假设现在分析出工商银行未来可能涨5毛，但他却把更多的钱投入到贵州茅台，则说明什么？说明在他看来，把钱投入到贵州茅台未来赚的钱，要比拿同样的钱投入到工商银行并且涨5毛赚的钱要多，而100万投到工商银行涨5毛的话能赚10万，那意味着在他看来，同样的钱投到贵州茅台，未来赚到的钱要大于10万。

贵州茅台要让100万赚10万需要涨多少？上面算了，需要涨178.6块，那么这就意味着，在那人看来，贵州茅台会涨超过178.6块，也就是股价涨超过1964元。

——那样就意味着，在还没涨到1964元之前，那人更偏向持仓。

当然，我并不是说那个人的预期一定就正确，也许他的分析方法是错的，毕竟市场不是由他一个人决定的。也许事后发现，贵州茅台是跌的。但这并不影响我们接下来的论证。

股票市场有买必有卖，成交里面买盘跟卖盘必定恒等。上面是从买方的角度出发，如果这时候从卖方的角度出发，会得出什么结论？如果一个人同时持有工商银行跟贵州茅台，这时候他选择抛售贵州茅台，而没抛售工商银行，或者说抛售贵州茅台的量要比抛售工商银行要多，则意味着什么？大家可以用上述的方法套用一遍去论证，我就不展开了，通俗点讲，就是如果他认为贵州茅台只跌个10来块，其实根本不痛不痒，但如果工商银行跌1块，那就是个不得了的事情了，而现在他抛售贵州茅台大于工商银行，肯定认为贵州茅台跌个不止几十块了，那就意味着他会等跌到那个位置才考虑接盘。

上面是为了方便大家理解，所以随便定了一个数值，接下来我们尝试把上述逻辑微分化：

这个市场有几千只股票，买入某只股的人为什么会买入这只股？说明这些买入的人根据自己的方法预判，在这股获得的收益要比买入其他股要高，那么如果这个股价现价越高，则说明买入者预判它涨幅的绝对值越高，那么他们就越倾向在更高的价才卖出。

这样就意味着，股价现价越高的股票，现价上方的潜在卖盘离现价越远，在价格轴分布越稀疏，不同价格潜在卖盘之间越接近“真空”。如果有看过我系列文章的朋友在这里就很好理解这段话是什么意思。

如果潜在卖盘在价格轴上的分布越稀疏，那么同样一笔资金量能够推动的涨幅（绝对值）越大。

同样的论证方法可以用在卖盘上面，这里就不重复了，最后得出的结论是股价现价越高，那么现价下方的潜在买盘离现价越远，在价格轴分布越稀疏，不同价格潜在买盘之间越接近“真空”。

如果潜在买盘在价格轴上的分布越稀疏，那么同样一笔资金量能够推动的跌幅（绝对值）越大。

其实以上论证过程，我也可以用通俗简单粗暴的方式总结：你买了工商银行，涨了1块就相当于两个涨停板了，你肯定会有止盈落袋为安的想法，但如果你买的是每股1786块的贵州茅台，你会因为涨了1块钱就离场吗？同样道理想买贵州茅台但觉得它在高位而不敢入场的，会因为它只跌了1块钱就改变想法敢入场吗？而我们看到的分时走势或者K线，都是由每一分钟的成交价连成的，每个参与成交的人都抱着同样的想法，自然每个现价上方的潜在卖盘与下方的潜在买盘会分布的稀疏。

通过上面，我们就可以得出下面两个等效的结论：

1. 股价现价越高，那么推动同样涨幅跌幅（绝对值）所需的资金量越少。
2. 股价现价越高，同样的资金量能够带来更大的涨幅跌幅（绝对值）。

所以，股价越高，那么波动幅度绝对值越大。

你看懂了上面，就理解系统自带的macd指标错在哪里了，它的底层逻辑是对的，但是却用错了变量。使得它释放的信号有时候是相反的，例如一个股一个周期内下跌1块钱，下个周期也是下跌1块钱，你肯定是看到底背离的，但实际上它还是处于加速下滑。

这样的话，你对缠论的掌握再深都没意义，因为工具都是错的。

所以正确的均线与macd系统是要经过改良，把变量换成比值——但换了后也会面临另外一些问题，就是不同周期的图有时候信号却是相反的，这个又涉及到更深更繁琐的内容了。

然而这还只是其中一个问题，就算解决了，还有成交量的问题需要解决